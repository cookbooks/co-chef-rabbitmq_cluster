###
# Generated by Chef for <%= node[:fqdn] %>
###

NODENAME=<% if node[:rabbitmq][:nodename] -%><%= node[:rabbitmq][:nodename] %><% else %><%= node.name %><% end %>
<% if node[:rabbitmq][:address] -%>NODE_IP_ADDRESS=<%= node[:rabbitmq][:address] %><% end %>
<% if node[:rabbitmq][:port] -%>NODE_PORT=<%= node[:rabbitmq][:port] %><% end %>
<% if node[:rabbitmq][:config] -%>CONFIG_FILE=<%= node[:rabbitmq][:config] %><% end %>
<% if node[:rabbitmq][:logdir] -%>LOG_BASE=<%= node[:rabbitmq][:logdir] %><% end %>
<% if node[:rabbitmq][:mnesiadir] -%>MNESIA_BASE=<%= node[:rabbitmq][:mnesiadir] %><% end %>

# Supposedly, you can include the erlang cookie when starting the service...
# this didn't work, though.
#SERVER_START_ARGS="-setcookie <%= node[:rabbitmq][:erlang_cookie] %>"
#MULTI_ERL_ARGS=

<% if node[:rabbitmq][:inet_dist_listen_min] && node[:rabbitmq][:inet_dist_listen_max] %>
# Set the min/max ports used for Erlang distributed node protocol.
# See http://www.rabbitmq.com/clustering.html#firewall
SERVER_ERL_ARGS="$SERVER_ERL_ARGS -kernel inet_dist_listen_min <%= node[:rabbitmq][:inet_dist_listen_min] -%> -kernel inet_dist_listen_max <%= node[:rabbitmq][:inet_dist_listen_max] -%>"
<% end %>
